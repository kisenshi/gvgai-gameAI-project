BasicGame key_handler=Pulse no_players=2 square_size=50
    SpriteSet
        background > Immovable img=aimodule/chamber_floor
        wall > Immovable img=aimodule/chamber_wall

        cake > Immovable img=aimodule/cake

        laser > Missile img=aimodule/shot_laser

        portalShoot > Missile
            portalShootBlue > img=aimodule/shot_portal_blue
            portalShootOrange > img=aimodule/shot_portal_orange

        portal > Door
            portalBlue > singleton=True img=aimodule/chamber_wall_blue
            portalOrange > singleton=True img=aimodule/chamber_wall_orange

        movable >
            subject > ShootAvatar
                subjectBlue > stype=portalShootBlue img=aimodule/chell_blue
                subjectOrange > stype=portalShootOrange img=aimodule/chell_orange

            turret > ShootAvatar stype=laser img=aimodule/turret

    LevelMapping
        . > background
        w > wall
        A > subjectBlue background
        T > turret background
        c > cake background

    InteractionSet
        movable wall movable > stepBack
        turret cake > stepBack
        laser wall > killSprite
        subject laser > killSprite
        cake subject > killSprite

        portalShootBlue wall  > transformToSingleton stype=subjectBlue stype_other=subjectOrange
        wall portalShootBlue > killAll stype=subjectBlue
        wall portalShootBlue > transformTo stype=portalBlue

        portalShootOrange wall  > transformToSingleton stype=subjectOrange stype_other=subjectBlue
        wall portalShootOrange > killAll stype=subjectOrange
        wall portalShootOrange > transformTo stype=portalOrange









    TerminationSet
        SpriteCounter stype=cake    limit=0 win=True,False
        SpriteCounter stype=subject limit=0 win=False,True


